# Estado del arte: Value Investing asistido por computación moderna

## Introducción

La **inversión en valor** (en inglés *value investing*) es una filosofía de inversión clásica que busca oportunidades en acciones infravaloradas según su valor fundamental. En términos simples, consiste en comprar activos a un precio bajo con base en un **análisis fundamental** riguroso. Tradicionalmente, esto implica estimar el **valor intrínseco** de una empresa (por métodos como el descuento de flujos de caja) y comparar dicho valor con el precio de mercado; si el precio cotiza muy por debajo del valor estimado, se considera que existe un **margen de seguridad** suficiente para invertir con tranquilidad. Benjamin Graham y David Dodd popularizaron este enfoque desde 1934, enfatizando la importancia del margen de seguridad para protegerse de errores en las estimaciones y de la volatilidad del mercado. Con el tiempo, el **value investing** ha evolucionado para enfocarse también en empresas con **ventajas competitivas duraderas** o *fosos económicos* (*economic moats*), es decir, atributos que les permiten mantener una posición dominante y rentabilidades superiores a largo plazo.

En la actualidad, la computación moderna ha revolucionado la forma de implementar estrategias de inversión en valor. El acceso a **grandes bases de datos financieros**, la disponibilidad de **APIs de mercado**, las plataformas de **trading algorítmico** y herramientas de **análisis de datos** permiten automatizar la búsqueda de acciones infravaloradas y aplicar criterios fundamentales de forma sistemática. Además, técnicas avanzadas como el *machine learning* y el procesamiento de lenguaje natural se están integrando con el análisis fundamental para descubrir patrones no evidentes y complementar la toma de decisiones tradicional. En este informe, presentamos un **estado del arte exhaustivo** de una aplicación pública orientada a **Value Investing**, cubriendo las herramientas y plataformas disponibles, los hallazgos en la literatura académica, casos de uso y proyectos abiertos ejemplares, frameworks de simulación y backtesting, prácticas modernas de manejo de datos financieros, y una revisión de los aspectos clave de la inversión en valor (detección de infravaloración, análisis de balances, cálculo de valor intrínseco y margen de seguridad, fosos económicos, y principales indicadores fundamentales).

## Herramientas, plataformas y bibliotecas para estrategias de Value Investing

En los últimos años han surgido numerosas **herramientas y plataformas** que facilitan la implementación de estrategias de inversión en valor aprovechando datos masivos y automatización. A continuación, se describen las principales categorías de herramientas y algunos ejemplos destacados, seguidos por una tabla comparativa.

### Plataformas de trading algorítmico y entornos de backtesting

* **QuantConnect** – Plataforma en la nube que permite diseñar, probar (*backtest*) y desplegar estrategias cuantitativas en múltiples activos. QuantConnect destaca por integrar datos fundamentales históricos: ofrece un dataset de **fundamentales de acciones estadounidenses** (vía Morningstar) con más de 8.000 acciones desde 1998, actualizado diariamente. Esto permite crear **“universos fundamentales”** para filtrar acciones según métricas como P/E, ROE, endeudamiento, etc., directamente en el algoritmo. QuantConnect proporciona un motor de backtesting de código abierto llamado **Lean** y soporta múltiples lenguajes (C#, Python). Es especialmente útil para estrategias basadas en análisis fundamental, ya que garantiza datos históricos *point-in-time* (sin sesgo de mirada al futuro) de estados financieros y ratios. Cuenta también con integración a brokers para ejecutar en vivo, y una comunidad activa compartiendo *algos* de ejemplo (incluyendo estrategias de *value* y multifactor).

* **Quantopian/Zipline** – Quantopian (ya descontinuada) fue pionera en backtesting basado en *fundamentals* mediante su API Pipeline. Su motor de backtesting en Python, **Zipline**, es de código abierto. Aunque Zipline originalmente se enfocó más en datos de precios, existen extensiones y datasets (como el de **Sharadar** vía Quandl) que permiten incorporar datos fundamentales. Algunos desarrolladores han usado Zipline con datos fundamentales para recrear carteras *value* clásicas (por ejemplo, filtrando por bajo P/B o alto FCF). Tras el cierre de Quantopian, parte de la comunidad migró a **QuantRocket**, una plataforma que combina datos de IB y otros proveedores con librerías Python de backtesting, adecuada para análisis fundamental y técnico.

* **Backtrader** – Framework de backtesting en Python muy popular, flexible y con enfoque event-driven. Si bien Backtrader no trae datos fundamentales por defecto, permite al usuario incorporar sus propios indicadores y feeds de datos (por ejemplo, se puede cargar una serie temporal de ratios fundamentalistas calculados previamente). Backtrader soporta estrategias multifactor y reequilibrio periódico, lo cual es útil para backtesting de carteras *value* (ej: comprar cada trimestre las acciones top según un ranking de valor). Existen complementos y scripts en la comunidad para integrar Backtrader con APIs (Yahoo Finance, Alpha Vantage) y obtener datos fundamentales o precios ajustados.

* **Backtesting.py** – Una librería más reciente y ligera para backtesting en Python. Permite probar rápidamente estrategias con sintaxis simple. Se inspira en Backtrader pero es más sencilla. Para *value investing*, Backtesting.py puede utilizarse junto con fuentes de datos fundamentales (cargando por ejemplo un CSV con los indicadores fundamentalistas por fecha). Su énfasis está en usabilidad y rapidez, aunque la incorporación de datos personalizados requiere trabajo manual.

* **Otras plataformas**: *TradingView* (con Pine Script) ofrece datos fundamentalistas básicos y backtesting integrado, aunque más orientado a *traders* minoristas y señales técnicas. **Portfolio123** es una plataforma especializada en **screening y backtesting fundamental**, con un enfoque de *ranking* y reglas lógicas similar a como operaría un gestor fundamental (permite probar cómo hubiera rendido una estrategia basada en filtros de valor, usando décadas de datos). Herramientas tradicionales como *MetaTrader* o *Amibroker* están más centradas en técnico, pero pueden incorporar fundamentales vía complementos. Por último, **OpenBB Terminal** (antes *Gamestonk Terminal*) es un proyecto de código abierto que provee un terminal de inversión con amplias capacidades, incluyendo acceso a balances, ratios financieros y series históricas para análisis fundamental.

### APIs y fuentes de datos financieros

Una pieza central para cualquier aplicación de inversión en valor son los **datos financieros** de calidad. Hoy en día abundan APIs que brindan acceso a datos de cotizaciones históricas, estados financieros, ratios e incluso estimaciones de analistas. Algunas opciones destacadas:

* **Yahoo Finance API (no oficial)** – Yahoo Finance es ampliamente utilizado por su gratuidad y amplitud de datos. Si bien Yahoo no ofrece una API pública oficial completa, se han desarrollado librerías *open source* como `yfinance` (Python) que permiten extraer fácilmente precios históricos, datos de cotización en tiempo real, e incluso **datos fundamentales y métricas clave** de empresas. Por ejemplo, con `yfinance` es posible descargar automáticamente estados de resultados, balances y flujos de caja de una empresa, así como obtener ratios como P/E, Beta, ROE, etc., a través de la propiedad `.info`. La facilidad de acceso hace de Yahoo Finance una primera opción para prototipos y análisis exploratorios. Sin embargo, al no ser una API oficialmente soportada, muchas veces estas librerías dependen de *scraping* de HTML en segundo plano, lo que las hace frágiles ante cambios en el sitio. Aun así, para una aplicación pública de inversión en valor de bajo costo, Yahoo (vía `yfinance` u otras librerías similares) ofrece un equilibrio atractivo entre alcance de datos y precio (gratuito).

* **Alphavantage** – API financiera con nivel gratuito que provee datos de acciones, divisas y cripto. Alphavantage se destaca por ofrecer algunos datos fundamentales básicos (por ejemplo, EPS, P/E, índices sectoriales) además de precios. Tiene módulos pre-calculados para indicadores técnicos, y recientemente ha añadido endpoints para **earnings y financials**. La ventaja es que es oficialmente soportada, con buen mantenimiento, aunque sus límites de tasa son estrictos en el plan gratuito. Para value investors, Alphavantage puede servir para obtener rápidamente *snapshots* fundamentales, aunque quizás no tan completos como otras fuentes.

* **Financial Modeling Prep (FMP)** – Un servicio/API muy popular entre desarrolladores por su fácil acceso a **estados financieros completos**. FMP ofrece endpoints REST para descargar en formato JSON/CSV los balances, income statements y cashflows trimestrales o anuales de miles de compañías, además de métricas como P/E, P/B, crecimiento, etc. Tiene un plan gratuito limitado que es suficiente para pruebas. Por ejemplo, con una llamada a FMP se puede obtener el historial de resultados de Apple (AAPL) en segundos. Muchas aplicaciones abiertas usan FMP debido a su conveniencia: evita tener que hacer *scraping* manual de informes 10-K/10-Q y entrega datos ya estructurados. Para una aplicación de inversión en valor, FMP puede ser la fuente central de datos fundamentales (se puede automatizar la actualización de nuevos datos financieros en cuanto las empresas publican resultados). Alternativas similares incluyen **Finnhub**, **Tiingo** o **Polygon.io**, que ofrecen APIs con cobertura fundamental (algunas de pago o con datos limitados en free tier).

* **Finviz** – Aunque no es una API per se, **Finviz.com** es un sitio web de *screening* de acciones muy apreciado por inversores de valor. Proporciona un screener capaz de filtrar acciones por multitud de criterios fundamentalistas (por ejemplo: P/E bajo cierto umbral, P/B bajo, margen operativo alto, crecimiento de ganancias positivo, *insider ownership*, etc.). Finviz muestra datos como el *Market Cap*, P/E, PEG, ROE, Dividend yield, P/FCF y otros de forma gratuita (con 15 min de retraso). Para integrarlo en una aplicación automatizada, existen **APIs no oficiales** y librerías Python que extraen datos de Finviz. Por ejemplo, la biblioteca `finvizfinance` permite obtener listas de acciones que cumplen determinados filtros fundamentalistas programáticamente. De esta manera, se puede usar Finviz como un **filtro inicial de ideas**: la aplicación podría, cada día, consultar las acciones que pasen ciertos criterios (e.g. P/E < 15, ROE > 15%, deuda/activo < 50%, etc.) y luego profundizar el análisis con datos más detallados vía otras fuentes. Finviz Elite (versión de pago) incluso ofrece integración más directa y datos en tiempo real. Su atractivo principal es la simplicidad para descubrir **acciones potencialmente infravaloradas** de forma rápida.

* **Morningstar, Yahoo Key Stats, etc.** – Otras fuentes de datos fundamentales incluyen la API de **Morningstar** (limitada a suscriptores) que provee datos de calidad institucional, y *endpoints* de servicios web de Yahoo (por ejemplo Yahoo Key Statistics) que listan ratios extensos – algunos desarrolladores han hecho *scrapers* de esas páginas. Asimismo, bases de datos como **SimFin** proporcionan datos financieros históricos gratuitos para investigación. Para un proyecto público, combinar múltiples fuentes puede ser necesario: por ejemplo, usar Yahoo/FMP para datos históricos y *web scraping* de sitios como **SEC EDGAR** para obtener datos recién publicados (filings de la SEC en formato XBRL).

**Tabla comparativa de herramientas y plataformas clave:**

| Herramienta/Plataforma            | Descripción breve                                                                                                                                                                                | Aplicabilidad al Value Investing                                                                                                                                                                                                                                                                                      |
| --------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **QuantConnect** (Lean)           | Plataforma cloud de *backtesting* y ejecución algorítmica con datos integrados (precios, fundamentales Morningstar). Lenguajes: C#, Python.                                                      | Permite diseñar y probar estrategias basadas en fundamentales (filtrado de acciones por ratios, seguimiento de valor intrínseco) con datos históricos *point-in-time*. Ideal para prototipar y desplegar estrategias *value* cuantitativas.                                                                           |
| **Backtrader** (Python)           | Framework open-source de backtesting event-driven. Altamente flexible, soporta indicadores personalizados.                                                                                       | Útil para simular carteras de acciones *value* con reglas de entrada/salida definidas (ej: comprar acciones con P/E más bajo del sector). Requiere cargar datos fundamentales manualmente (por CSV o API).                                                                                                            |
| **Zipline** (Python)              | Biblioteca de backtesting desarrollada por Quantopian (ya discontinuada). Incluye Pipeline API para filtrar universos.                                                                           | Con datos adecuados, permite recrear estrategias de factor investing (e.g. deciles de valor). La comunidad suele usarla con datasets externos de fundamentales. Hoy en día, alternativas más mantenidas (Backtrader, backtesting.py) la han sustituido en parte.                                                      |
| **Alpaca API** (Broker)           | API de corretaje para trading de acciones y cripto, con **paper trading** gratis. Ofrece datos de mercado (cotizaciones, historial).                                                             | No proporciona datos fundamentales extensos por sí misma (en proceso de añadirlos). Se complementa con otras fuentes para una app *value*. Útil para implementar la **ejecución** de estrategias: comprar/vender las acciones seleccionadas por los criterios de valor, de forma automática.                          |
| **Yahoo Finance (yfinance)**      | Fuente gratuita de datos de mercado y fundamentales (a través de librerías no oficiales). Cobertura global amplia, incluye precios históricos ajustados, noticias, y métricas financieras clave. | Base de datos accesible para alimentar la aplicación con cotizaciones y estados financieros. Útil para calcular ratios al vuelo (P/E, P/B, etc.) y monitorear precios respecto al valor intrínseco estimado. Requiere considerar limitaciones de no ser API oficial (posibles cambios en HTML, límites de velocidad). |
| **Finviz** (screener web)         | Portal de *screening* con integración de **análisis fundamental y técnico**. Permite filtrar acciones por múltiples criterios fundamentalistas.                                                  | Herramienta para encontrar **acciones infravaloradas** según indicadores clásicos. En una app, puede emplearse para generar la *watchlist* inicial de candidatos a invertir (ej: top 20 empresas con menor P/E y deuda razonable). Con librerías Python se automatiza la extracción de sus resultados.                |
| **Financial Modeling Prep** (API) | API REST freemium con datos financieros completos (balances, resultados, flujos) y ratios pre-calculados. Formatos JSON/CSV fáciles de usar.                                                     | Permite construir un **pipeline ETL** robusto: descargar periódicamente nuevos datos financieros y almacenarlos en la base de la aplicación. Facilita el cálculo de valor intrínseco mediante DCF u otros métodos al proveer todos los insumos (ingresos, gastos, flujos de efectivo, etc.).                          |
| **OpenBB Terminal**               | Aplicación de código abierto tipo terminal Bloomberg. Incorpora módulos para análisis fundamental (ratios, comparativas, datos históricos) y visualizaciones.                                    | Puede integrarse o servir de referencia para la aplicación pública. Ofrece funciones listas para usar, p.ej. comandos para obtener series de **ROE, FCF, deuda/EBITDA** de una empresa a lo largo del tiempo. Útil para usuarios avanzados que deseen un análisis interactivo complementario.                         |

*(Tabla 1: Herramientas y plataformas relevantes para implementar estrategias de inversión en valor.)*

## Literatura académica y científica sobre Value Investing y cómputo

La inversión en valor ha sido ampliamente estudiada en la literatura financiera. Desde el trabajo seminal de Graham y Dodd, pasando por la validación empírica de **factores de inversión** (en particular el *factor valor*), hasta investigaciones recientes que incorporan técnicas de **machine learning** e inteligencia artificial, el corpus académico ofrece valiosos insights para nuestra aplicación.

**Factor valor en finanzas** – Los estudios clásicos de Fama & French (década de 1990) establecieron que las acciones con **métricas de valoración bajas** (por ejemplo, bajo P/B o alto earnings-to-price) tienden a obtener rendimientos superiores en el largo plazo en comparación con acciones de crecimiento. En otras palabras, el *factor value* históricamente ha ofrecido una **prima de rentabilidad ajustada por riesgo**. Este hecho ha sido corroborado por numerosos estudios: por ejemplo, en la literatura de *factor investing* se define “value” como *compañías baratas desde una perspectiva fundamental*, y se ha documentado que carteras tiltadas hacia este factor baten al mercado en promedio. Esta evidencia respalda la premisa del value investing de que existen ineficiencias explotables – a veces el mercado infravalora empresas sólidas por pesimismo excesivo, y sus precios eventualmente convergerán a su valor intrínseco.

**Modelos cuantitativos de valor** – En las últimas décadas, inversores cuantitativos han buscado sistematizar el proceso de selección de acciones de valor. Un ejemplo notable es la **“Magic Formula”** de Joel Greenblatt (2006), que combina rentabilidad sobre capital (ROIC) y rendimiento de ganancias (inverso del P/E) para clasificar acciones atractivas; estudios informales mostraron resultados interesantes, aunque con debate sobre su persistencia. Más rigurosamente, Bartram y Grinblatt (2018) propusieron un enfoque “agnóstico” de valoración fundamental, estimando el **fair value de una empresa como función lineal de 21 variables financieras** (de balance, resultados, etc.), sin necesidad de realizar proyecciones explícitas de flujos. Encontraron que este método podía identificar **desviaciones de precio** (mispricings) significativas, cuya corrección futura generaba alfa. Este trabajo (“Agnostic fundamental analysis works”) sugiere que métodos estadísticos pueden complementarse con fundamentos tradicionales para detectar oportunidades de value investing.

**Machine Learning e IA en la inversión en valor** – Una corriente de investigación muy actual explora el uso de **modelos de aprendizaje automático** para mejorar la selección de acciones de valor. El desafío es que el estilo *value* clásico se basa en muchos juicios cualitativos (evaluar la calidad del negocio, perspectivas a largo plazo, etc.), pero los algoritmos modernos pueden ayudar en ciertos aspectos. Por ejemplo, se han desarrollado *modelos de clasificación* que, dados datos históricos fundamentalistas, predicen si una acción tiene características de valor con alto potencial de retorno. Un estudio de 2024 entrenó un conjunto de clasificadores usando principios de value investing y **calidad** (métricas de balances y capitalización histórica) para automatizar la selección de acciones infravaloradas; el modelo logró identificar casos con altas probabilidades de obtener >15% anualizado en los siguientes 3 años. Este resultado (aunque hipotético) muestra la promesa de combinar **indicadores fundamentales tradicionales con técnicas de ML** para descubrir patrones no lineales en los datos que escapan al análisis manual. De igual modo, investigadores de Robeco (2022) reportan que los modelos de *machine learning* pueden detectar **no linearidades ocultas** importantes para estimar el valor fundamental de acciones, superando a modelos lineales clásicos al complementar métodos como el DCF. En particular, incorporar interacciones y relaciones complejas entre variables financieras (por ejemplo, cómo la combinación de cierto nivel de endeudamiento con determinado margen operativo influye en la valoración) mejora la detección de mispricings.

Otra aplicación del ML es en el análisis de datos no estructurados relevantes para el value investing. Por ejemplo, **procesamiento de lenguaje natural (NLP)** para analizar conferencias de resultados o reportes de management: se ha encontrado que el tono y lenguaje usado por los directivos puede dar pistas sobre la **calidad** y honestidad de la empresa, complementando las cifras numéricas. Un lenguaje conservador o prudente en llamadas trimestrales podría correlacionar con empresas de tipo valor genuino, y algoritmos de análisis de texto pueden identificar esas señales sutiles. Asimismo, se investiga el uso de **redes neuronales** para predecir rendimientos a 12 meses usando datos fundamentales y de precios; por ejemplo, Morningstar reportó un estudio donde una IA predice rendimientos a 1 año basándose en múltiples fuentes de datos, logrando cierta mejora sobre métodos tradicionales. No obstante, muchos profesionales advierten que los modelos de IA deben ser interpretables y manejados con cautela en este contexto – la **“caja negra”** de un algoritmo puro puede ser difícil de confiar para inversionistas humanos, por lo que se busca combinar la potencia de ML con la supervisión y sentido común de los analistas.

En resumen, la literatura actual sugiere que el **enfoque cuantitativo e informático no reemplaza los principios del value investing, sino que los potencia**. Las estrategias de factores han validado la efectividad de indicadores como P/B o P/E bajos; nuevas técnicas de datos y aprendizaje automático permiten refinar la búsqueda de valor (por ejemplo, incorporando medidas de *quality* para evitar trampas de valor, o usando IA para estimar más precisamente valores intrínsecos). Para nuestra aplicación, es relevante incorporar estos hallazgos: por un lado, apoyarnos en métricas tradicionales avaladas por la academia (evitando indicadores arbitrarios sin respaldo histórico), y por otro, explorar funcionalidades avanzadas como **modelos predictivos** o análisis de texto que puedan dar una ventaja adicional en la detección de oportunidades.

## Casos de uso, proyectos abiertos y ejemplos relevantes

Existen numerosos proyectos de código abierto y casos prácticos que ejemplifican cómo implementar componentes de una aplicación de value investing con herramientas modernas. Estos proyectos brindan inspiración y a menudo componentes reutilizables (código en GitHub, notebooks, etc.) que podrían incorporarse o servir de referencia en el desarrollo.

* **FinanceToolkit (Jeroen Bouma, 2023)** – Una biblioteca open-source en Python que reúne más de 150 **ratios financieros, indicadores y métricas de rendimiento**, con cálculos totalmente transparentes. Nació de la necesidad de tener definiciones consistentes: el autor notó que una métrica tan básica como el P/E puede variar entre proveedores según cómo se calcule (earnings de 12 meses vs forward, etc.). FinanceToolkit permite calcular de forma uniforme ratios como ROE, ROA, P/B, EV/EBITDA, FCF yield, *Piotroski F-score*, etc., a partir de datos crudos de estados financieros. Además, incluye acceso a datos históricos de múltiples activos (acciones, ETFs, índices, incluso criptos) y métricas de riesgo (VaR, Sharpe). Para una aplicación de value investing, esta herramienta es valiosa: en lugar de confiar en datos de terceros, se puede integrar FinanceToolkit para computar localmente todos los indicadores fundamentales de interés con definiciones coherentes. Por ejemplo, podríamos calcular el *earnings yield* uniforme para todas las acciones de un índice y rankearlas, minimizando discrepancias metodológicas. La transparencia en métodos también facilita explicar al usuario final cómo se obtiene cada cifra, alineado con la filosofía de comprender los fundamentos.

* **Screeners e Intrinsic Value Calculators** – Hay proyectos que automatizan la selección y valoración de acciones. Un ejemplo es *hjones20/fundamental-analysis*, un repositorio que permite **filtrar acciones por indicadores fundamentales** y luego calcula el **valor intrínseco** de las que pasan el filtro mediante un modelo de Descuento de Flujos de Caja (DCF). Esto ilustra un posible flujo para nuestra aplicación: 1) screening inicial (p.ej. filtrar empresas de cierto sector con P/E < X, ROE > Y, etc.), 2) para cada candidata, obtener sus flujos de caja históricos y proyectar un DCF con supuestos razonables, 3) estimar el valor intrínseco y compararlo con el precio actual, 4) recomendar aquellas con mayor margen de seguridad. Repositorios como ese suelen incluir funciones para obtener datos (usando Yahoo Finance API u otros) y cálculos financieros que podríamos reutilizar. En la misma línea, existe software de comunidad como **Excel/Google Sheets templates** para valor intrínseco (p.ej. un *Excel DCF* popular compartido en r/ValueInvesting). Llevar esas calculadoras a un entorno Python/streamlit web es una tendencia que algunos proyectos ya muestran.

* **Deep Learning aplicado a fundamentales** – Un caso llamativo es el proyecto *DeepBuffett*, cuyo objetivo es usar *deep learning* sobre datos financieros fundamentales para generar señales de **compra/venta estilo value**. Inspirado en Warren Buffett, los autores intentan entrenar un modelo que, con ratios financieros de muchas empresas, aprenda a predecir cuáles serán ganadoras a largo plazo. Aunque es experimental, indica cómo se pueden combinar **redes neuronales** con features fundamentalistas clásicos (crecimiento de ventas, margen bruto, endeudamiento, etc.). Los resultados y aproximaciones de este proyecto podrían guiar la implementación de un módulo de recomendación en nuestra app que use aprendizaje profundo para priorizar ciertas empresas entre las candidatas de valor.

* **Streamlit y análisis fundamental interactivo** – Varios desarrolladores han creado aplicaciones web simples para análisis fundamental usando **Streamlit** (un framework Python para apps de datos). Un ejemplo publicado en *dev.to* muestra una app que, dado un ticker, muestra sus indicadores fundamentales clave, gráficos históricos de métricas (P/E a lo largo del tiempo, tendencia de ingresos, flujo de caja libre, etc.) y comparación con competidores. Esto es relevante porque nuestra aplicación pública podría beneficiarse de ese enfoque: proveer visualizaciones claras de por qué una acción está infravalorada (por ejemplo, mostrar que sus ganancias han crecido pero el mercado no lo ha reconocido, manteniendo un P/E bajo). Integrar gráficos interactivos (usando Plotly, Altair, etc.) con datos fundamentalistas en tiempo real es factible y mejora la experiencia del usuario. Estos proyectos ofrecen código abierto para extraer datos (a menudo vía Yahoo o FMP) y presentarlos de forma amigable.

* **Screener automation y scoring** – También hay iniciativas de **“rankers”** de acciones. Un repo en GitHub presenta un sistema que **puntúa automáticamente acciones del 0 al 100** en función de múltiples dimensiones: valoración, rentabilidad, crecimiento, salud financiera, etc., comparándolas con sus sectores. Este enfoque de *scoring* multi-factor podría incorporarse para ofrecer al usuario una clasificación sencilla de las mejores oportunidades *value* en un universo dado. Por ejemplo, la aplicación podría mostrar un puntaje global y desglosado (valoración: 90, calidad: 80, momentum: 30, indicando que es barata y de calidad, aunque no esté de moda) para cada acción candidata.

* **Comunidades y concursos** – Finalmente, destacar que comunidades como Kaggle han alojado competiciones de predicción de mercado donde se proporciona datos fundamentalistas (e.g., el *Two Sigma Financial Modeling* challenge) que han generado muchos notebooks públicos. Si bien no todas se centran en valor, es posible extraer ideas de características creadas y enfoques de modelado. Adicionalmente, foros como r/ValueInvesting en Reddit comparten *screeners* y métodos caseros; algunos usuarios han creado **APIs caseras** para datos (por ejemplo, usando Google Sheets scripts para consultar Yahoo Finance periodically) y las han publicado. Todo este ecosistema de proyectos abiertos reduce el esfuerzo de reinventar la rueda al desarrollar nuestra aplicación: podemos apoyarnos en librerías existentes para obtención de datos y cálculo de métricas, y aprender de la experiencia de otros en qué enfoques funcionan o no al sistematizar el value investing.

## Frameworks y entornos de backtesting y simulación

La posibilidad de **probar históricamente** una estrategia de inversión en valor es crucial antes de arriesgar capital real o lanzar una aplicación al público. Afortunadamente, existen diversos frameworks que permiten realizar simulaciones con datos pasados para evaluar cómo habría desempeñado una estrategia basada en análisis fundamental. Ya mencionamos algunos en la sección de herramientas, pero profundizamos en su rol y características específicas para fundamental analysis:

* **Frameworks Python**: Librerías como Backtrader, Zipline, *bt* (de `pmorissette/bt` en GitHub) y **Backtesting.py** ofrecen entornos para programar las reglas de compra-venta y luego correrlas sobre datos históricos. Un reto particular de las estrategias *value* es que se basan en **datos fundamentalistas discretos** (trimestrales, anuales) combinados con precios diarios. Para simular correctamente, se debe garantizar que el algoritmo solo conozca la información disponible hasta ese punto en el tiempo. Herramientas como Zipline tenían soporte para datos point-in-time y Pipeline (pudiendo rebalancear cada período usando el último fundamental disponible). Con Backtrader o Backtesting.py, a menudo se hace manualmente: se puede cargar un calendario de rebalance (por ej., cada inicio de mes) y en cada punto filtrar el universo en base a un dataset de ratios precomputados válido hasta el trimestre anterior. Aunque requiere preparación de datos, estos frameworks dan la flexibilidad de definir cualquier criterio (ej: “comprar las 10 acciones con menor EV/EBITDA de tal mercado, manteniéndolas por 1 año o hasta que ya no estén en el top 20%”). Además, permiten incluir costes de transacción, factor de liquidez, etc., para hacer la simulación más realista.

* **Plataformas especializadas**: QuantConnect, Portfolio123 y similares ofrecen entornos cerrados donde mucho del trabajo pesado ya está resuelto. En QuantConnect uno puede usar el dataset Morningstar para, por ejemplo, construir una estrategia que **cada mes identifique las acciones con mayor “margin of safety”** según un modelo DCF y tome posiciones en ellas. La plataforma se encarga de sincronizar los datos (precios y fundamentales) correctamente en el tiempo. Portfolio123, por su parte, está diseñado específicamente para backtesting fundamental: el usuario arma reglas como filtro de screener (p. ej. *Rank by (P/E + P/B + Yield)* o combinaciones booleanas) y el sistema genera resultados históricos, con métricas de performance, turnover, drawdowns, etc., de la cartera resultante. Esto es muy útil para calibrar criterios: la aplicación podría inicialmente ofrecer estrategias predefinidas (“Deep Value”, “Quality Value”, “Magic Formula”) que han sido backtesteadas en plataformas así, mostrando su rendimiento histórico y dejando que el usuario elija o modifique parámetros.

* **Lenguajes alternativos (R, MATLAB)**: En R, paquetes como **quantmod**, **TTR** (Technical Trading Rules) y **quantstrat** permiten backtesting relativamente fácil, aunque se centran en series temporales de precios principalmente. Sin embargo, R tiene la ventaja de acceder a data financiera vía paquetes (por ej., `tidyquant` integra datos de Yahoo, FRED, etc., y podría obtener fundamentales de algunas API). Para usuarios más cómodos con hojas de cálculo, Excel mismo con complementos (como la API de Bloomberg, Capital IQ si se tiene acceso, o formulas de Google Finance) se ha usado para *backtests* simples de estrategias value (no recomendables para precisión pero ilustrativos). MATLAB tiene *Financial Toolbox* pero menos popular en comunidad open-source.

* **Validación y riesgos en backtesting**: Es importante mencionar que, al probar estrategias fundamentales, hay que cuidar problemas como **sesgo de supervivencia** (survivorship bias) – asegurarse de incluir empresas que quebraron o desaparecieron, ya que una estrategia real habría podido seleccionarlas. También el **lag de publicación**: por ejemplo, los datos del cuarto trimestre suelen publicarse a fines de enero o febrero; una estrategia que usa datos anuales debería entrar posiciones no antes de tener esa información. Herramientas como QuantConnect ya incorporan esos retrasos (45 días tras el periodo, por ejemplo, para simular disponibilidad de la 10-K). Si implementamos nuestro propio backtest, debemos replicar eso (p.ej., no usar los datos de 2020Q4 hasta febrero 2021 en la sim). Por lo tanto, al escoger un framework o construir uno in-house, es clave incluir este tipo de consideraciones para que los resultados sean fiables.

En síntesis, tenemos a disposición **frameworks consolidados** para simular estrategias de value investing, tanto de código libre como comerciales. Su uso nos permitirá afinar los criterios de selección (quizá testeando distintas combinaciones de indicadores, períodos de rebalanceo, tamaños de posición, etc.) e incluso mostrar al usuario final de la aplicación cómo habría funcionado la estrategia en el pasado (aportando credibilidad y contexto). Un enfoque recomendado es desarrollar la lógica en un entorno como Backtrader/Backtesting.py para total control, y una vez validada, implementarla en un servicio en la nube (por ejemplo usando Lean de QuantConnect open-source, que puede correr en AWS) para integrarla con la aplicación pública de manera escalable.

## Pipelines de datos y prácticas modernas de ingeniería financiera

Para sustentar una aplicación pública de value investing es necesario construir un **pipeline de datos financieros** robusto, que abarque desde la **extracción de datos brutos** hasta la **transformación y carga** en los sistemas de la aplicación (lo que suele abreviarse como ETL: *Extract, Transform, Load*). A continuación se describen las prácticas y componentes habituales en este proceso:

* **Fuentes de datos y extracción (Extract)**: El primer paso es recolectar datos de las fuentes identificadas (APIs, web scraping, bases de datos). Por ejemplo, podríamos usar la API de FMP para descargar diariamente las nuevas actualizaciones de estados financieros (cuando sea temporada de reportes trimestrales) y la librería `yfinance` para obtener precios de cierre ajustados cada día para nuestro universo de acciones. En casos donde ciertas métricas no estén disponibles vía API, se puede recurrir al *scraping*. Por ejemplo, si quisiéramos el número de menciones de cierta palabra en las conferencias de resultados, podríamos scrapear las transcripciones de *Seeking Alpha*. Herramientas populares: **Requests/urllib** para hacer llamadas HTTP, **BeautifulSoup** o **lxml** para parsear HTML, y **Selenium** (o similares) para páginas dinámicas con mucho JavaScript. No obstante, siempre que sea posible, es preferible usar APIs oficiales o bien estructuradas, por confiabilidad. Otra fuente a mencionar es **SEC EDGAR**: los informes financieros de las compañías en EE. UU. se presentan en formato XBRL accesible públicamente. Existen librerías Python (ej: `sec-edgar-downloader`) y servicios (como *Daloopa*) orientados a obtener datos de estos filings de forma procesable. Un pipeline moderno podría incluir la descarga de los archivos XBRL y su parseo para extraer elementos específicos (ingresos, utilidades, etc.), garantizando tener datos de primer nivel directamente del regulador.

* **Almacenamiento y organización**: Tras extraer los datos crudos, es recomendable almacenarlos de forma organizada para su posterior uso. En el contexto de una aplicación de inversión en valor, manejaremos fundamentalmente dos tipos de datos: **tiemposeries de precios** (incluyendo quizás volúmenes) y **datos fundamentales tabulares** (ej: una tabla de estados financieros por empresa y fecha). Una práctica común es tener una base de datos financiera, ya sea SQL (por ejemplo, PostgreSQL) o NoSQL/tiempo-series (como InfluxDB, aunque para datos fundamentales discretos un SQL funciona bien). Podemos diseñar tablas como `Financials(ticker, date, metric, value)` o almacenar JSONs completos de informes financieros. Por rendimiento, a veces se pre-calculan también ratios básicos en las tablas (por ej., almacenar directamente P/E de cada trimestre, para no calcularlo cada consulta). Si el público objetivo de la app no requiere datos en tiempo real absoluto, una actualización diaria o semanal de fundamentales suele ser suficiente (ya que los fundamentals cambian trimestralmente). Por tanto, el pipeline podría correr en batch cada noche: extraer los nuevos datos (si hay), almacenarlos y quizás regenerar ciertos *indicadores compuestos* (ej: score de valor, ranking) que la aplicación mostrará.

* **Transformación y limpieza (Transform)**: Los datos financieros reales suelen requerir **limpieza y normalización**. Esto incluye manejar *valores faltantes* (por ejemplo, empresas jóvenes pueden no tener un historial largo de métricas; podríamos imputar o marcar nulos), gestionar **splits y dividendos** en los precios (ajustar precios históricos para reflejar splits, cosa que APIs como Yahoo suelen proveer ya ajustado), y homogeneizar unidades/formatos (p.ej., asegurarse que todos los valores monetarios estén en una misma moneda, o convertir los números de XBRL que vienen en notación científica a números estándar). También es importante conciliar datos de diferentes fuentes: si obtenemos precio de un sitio y EPS de otro, hay que verificar que el ticker y fechas alineen. En esta fase también calculamos los **indicadores derivados** necesarios: ratios financieros (P/E, P/B, ROE, margen bruto, etc.), crecimiento de ingresos (comparando años), flujo de caja libre, *yield* sobre FCF, etc. Como apuntó el creador de FinanceToolkit, distintos proveedores calculan estos de forma distinta, por lo que hacerlo nosotros nos da consistencia. Utilizar librerías como Pandas facilita estas transformaciones: por ejemplo, se puede agrupar datos por trimestre y pivotear tablas para tener una fila por empresa con todas sus métricas en columnas, luego calcular columnas adicionales (deuda/EBITDA, interés cobertura, etc.). Una buena práctica es **versionar** los datos fundamentales por fecha de publicación para evitar confusiones (point-in-time): es decir, mantener registro de qué datos se conocían en cada momento.

* **Carga y acceso (Load)**: Una vez transformados y almacenados, se pasa a la capa de acceso. La aplicación pública necesitará vías para consultar los datos de manera eficiente. Esto podría ser mediante **APIs internas** (por ejemplo, un endpoint REST que dado un ticker devuelva sus fundamentales para ser usados en la interfaz web) o mediante consultas directas si la app corre en el mismo servidor que la base de datos. Tecnologías modernas incluyen el uso de **GraphQL** para permitir obtener solo los campos necesarios de los datos. Sin embargo, en muchos casos un simple ORM o consultas SQL optimizadas bastarán. Si la aplicación planea escalar a muchos usuarios concurrentes, habrá que considerar *caching* de resultados (por ejemplo, las métricas calculadas de una empresa se pueden cachear en memoria o en Redis para responder rápidamente a solicitudes repetidas). Asimismo, para cálculos intensivos (como evaluar un modelo ML sobre todas las empresas cada día), se pueden usar herramientas de *batch processing* o *distributed computing* (Spark, Dask, etc.), aunque para un prototipo tal vez no sea necesario.

* **Pipeline continuo e integración**: Integrar todo lo anterior suele implicar el uso de herramientas de orquestación. Un estándar de la industria es Apache **Airflow**, que permite programar y supervisar flujos de trabajo de datos (por ejemplo, una tarea diaria que ejecute un script de scraping, luego una tarea de procesar esos datos y actualizar la base). En un contexto más sencillo, incluso *cron jobs* programados en el servidor pueden servir. Lo importante es contar con **alertas** y **logs** para enterarnos si algún paso falla (por ejemplo, si la API cambia algo y un campo llega vacío, o si el scraper de Yahoo es bloqueado). Para robustez, algunas aplicaciones incorporan redundancia de fuentes: si Yahoo falla, intentar FMP, etc. Las prácticas de ingeniería de datos también recomiendan pruebas (tests) para los cálculos clave – en nuestro caso, validar que el cálculo de valor intrínseco o de un ratio se mantiene correcto con distintos inputs.

En cuanto a **ingeniería financiera moderna**, un tema ligado al pipeline es cómo estructurar la toma de decisiones automatizada. Por ejemplo, algunas *hedge funds* cuantitativos construyen **pipelines de features** donde a los datos fundamentales tradicionales suman datos alternativos (menciones en redes, señales de web tráfico, etc.), generando un gran vector de características para cada empresa, que luego alimenta a un modelo predictivo. Para nuestra aplicación pública, probablemente el alcance sea limitado a fundamentales clásicos, pero es bueno saber que escalando el pipeline se podrían incorporar fuentes como *APIs de noticias/sentimiento* para complementar (por ejemplo, descartar una acción con buenos fundamentales si hay señales de alerta en noticias recientes, etc.).

Resumiendo, las prácticas modernas nos llevan a construir una **infraestructura de datos sólida** detrás de la aplicación de value investing: recolección automatizada, almacenaje consistente y accesible, limpieza y enriquecimiento de datos, y procesos recurrentes que mantengan la información al día. Esto asegura que los usuarios de la aplicación siempre vean cifras confiables (p.ej. el P/E real más reciente, o el valor intrínseco recalculado con los últimos resultados) y que las recomendaciones se basen en datos actualizados. Además, una arquitectura bien diseñada facilita ampliar la aplicación con nuevas métricas o análisis en el futuro sin tener que rehacer todo desde cero.

## Aspectos clave del Value Investing y su implementación computacional

Para que una aplicación orientada a value investing sea verdaderamente útil, debe abordar los conceptos centrales de esta filosofía y traducirlos en funcionalidades concretas. A continuación profundizamos en dichos aspectos –cómo se definen, por qué importan y cómo pueden incorporarse mediante herramientas computacionales–:

### Búsqueda de acciones infravaloradas

El punto de partida del value investing es **identificar acciones potencialmente infravaloradas** por el mercado. En la práctica, esto significa encontrar empresas cuyo precio de mercado actual sea bajo en relación con algún referente de valor fundamental. Clásicamente, los inversores en valor utilizaban manualmente técnicas como revisar acciones con **bajo ratio Precio/Valor en Libros (P/B)**, **bajo Precio/Utilidad (P/E)** o un **alto rendimiento de dividendos**, bajo la hipótesis de que podrían estar baratas. En nuestra aplicación, este proceso puede automatizarse mediante **screeners programáticos**: por ejemplo, consultar la base de datos para todas las acciones con P/E por debajo de cierto umbral (digamos menor a 15) y P/B menor a 1. En segundos obtendríamos una lista de candidatas. Además, podemos incluir criterios de calidad para evitar **“trampas de valor”** (compañías baratas pero en problemas serios). Por eso, muchos screens de valor moderno añaden filtros de **rentabilidad** (ROE o ROIC positivos y decentes), **deuda controlada** (deuda/activo o deuda/EBITDA bajos) y buen historial de ganancias. Un ejemplo de implementación: usar la API de Finviz vía Python para obtener todas las empresas que cumplen X y Y criterios y luego cruzar esa lista con datos locales más detallados.

Otra técnica es ordenar todo un universo según un **ranking de valor**. Aquí se puede emplear un sistema de puntuación (como se mencionó en proyectos open source) o simplemente ordenar por una métrica combinada. Joel Greenblatt proponía un ranking combinado de *earnings yield* y *ROIC* (la *Magic Formula*). Otros usan el *Piotroski F-score* para ordenar empresas value según fortaleza financiera. Computacionalmente, esto implica calcular dichas fórmulas para cada empresa y luego hacer sorting. La app podría mostrar, por sector o mercado, el *top 10* de acciones con mejor puntuación value en cada momento.

Es importante resaltar que no todas las acciones baratas son infravaloradas realmente; por ello, una aplicación robusta puede ofrecer análisis más profundos una vez identificada la posible oportunidad. Pero este primer paso de cribado masivo es donde la computación brilla: lo que a Benjamin Graham le tomaba semanas revisando manualmente guías de mercado, hoy un script lo hace instantáneamente sobre miles de empresas.

### Análisis de estados financieros y fundamentales de la empresa

Encontrada una posible acción infravalorada, el inversor en valor tradicional examina con lupa sus **estados financieros** (balance general, estado de resultados, flujo de caja) para entender la salud y perspectivas del negocio. Nuestra aplicación puede agilizar y estandarizar este análisis fundamental detallado:

* **Balance General**: Se pueden extraer métricas de solvencia y estructura de capital. Por ejemplo, calcular el **ratio corriente** (activo corriente / pasivo corriente) para evaluar liquidez, el **grado de endeudamiento** (deuda total / patrimonio) para ver apalancamiento, o el valor en libros por acción. Una funcionalidad podría mostrar al usuario una ficha con los principales rubros del balance de los últimos, digamos, 5 años, destacando tendencias (¿aumenta el efectivo? ¿disminuyen los inventarios? ¿la deuda a largo plazo ha crecido?). Herramientas computacionales pueden generar automáticamente gráficos de composición del balance (porcentajes de activos y pasivos), o incluso hacer comparativas entre empresas del mismo sector.

* **Estado de Resultados**: Aquí interesa el crecimiento de ingresos, la estabilidad de los márgenes y la rentabilidad neta. La app puede calcular tasas de crecimiento anual compuesto (CAGR) de ingresos y utilidades netas a 3, 5, 10 años; también margen bruto, margen operativo y margen neto, mostrando si la empresa mantiene **márgenes consistentemente altos** (señal de ventaja competitiva potencial) o si están en declive. Indicadores como el **ROE** (return on equity) o **ROA** (return on assets) salen del estado de resultados combinado con el balance, y son claves: un ROE alto y sostenido puede indicar una empresa de calidad, mientras que un ROE bajo sugiere problemas de eficiencia. Calcular ROE y compararlo con la media del sector es trivial con nuestros datos. Igualmente, la aplicación podría alertar si las utilidades han sido volátiles o negativas en ciertos años, lo que requiere atención.

* **Flujo de Caja**: Muchos *value investors* dicen "el beneficio es opinión, el flujo de caja es realidad". Analizar el **flujo de caja libre (FCF)** es esencial. Computacionalmente obtenemos FCF restando gastos de capital (capex) al flujo de caja operativo. Un FCF positivo y creciente es buena señal, mientras que una acción con ganancias contables pero FCF negativo recurrente puede ser riesgosa (posible manipulación contable o alta inversión no rentable). La app debe destacar el FCF yield (FCF/Capitalización) como indicador de valor: un FCF yield alto (por ejemplo > 10%) indica la empresa genera mucho cash respecto a su precio, potencialmente infravalorada. Esto se puede calcular y presentar junto a P/E y dividend yield para dar una visión amplia.

* **Estimaciones y calidad de ganancias**: Más allá de las cifras históricas, un análisis fundamental incluye mirar **tendencias** y *red flags*. Por ejemplo, la aplicación podría calcular si los ingresos crecen pero los beneficios no (lo que reduce márgenes, quizá por costos crecientes), o si el flujo de caja operativo es sistemáticamente menor que la utilidad neta (posible indicador de que las ganancias contables no se traducen en cash real, cuidado con políticas contables). También se pueden incorporar datos de consenso de analistas (si disponibles vía API) para ver proyecciones de EPS futuro y compararlas con las métricas actuales.

En resumen, la aplicación debe actuar como un **analista financiero digital**: consolidando toda la información relevante de los estados financieros en paneles fáciles de digerir, resaltando fortalezas (ej. “esta empresa tiene caja neta y cero deuda, una fortaleza financiera”) y debilidades (“los márgenes han caído 5 años seguidos”). Gran parte de este análisis se alimenta de **indicadores fundamentales** calculados, que veremos en una sección más abajo, pero la clave es contextualizarlos en la historia de la empresa y su sector, cosa que la automatización puede hacer al instante con los datos cargados.

### Cálculo de valor intrínseco y margen de seguridad

El núcleo del value investing es comprar con *margen de seguridad*, es decir, pagar bastante menos de lo que vale intrínsecamente la empresa. Aquí entra el desafío de estimar ese **valor intrínseco** mediante modelos financieros. La aplicación podría ofrecer varias herramientas para esto:

* **Modelo DCF (Descuento de Flujos de Caja)**: Es el método más reconocido. Computacionalmente, un DCF requiere proyectar flujos de caja futuros y descontarlos a valor presente con una tasa adecuada. Nuestra aplicación puede automatizar un DCF básico tomando insumos como: flujo de caja libre actual, tasa de crecimiento esperada de FCF (quizá basada en el crecimiento histórico o en estimaciones de analistas), y un costo de capital (WACC) o tasa de descuento, más un valor terminal. Por ejemplo, podría haber una sección “Calculadora de Valor Intrínseco” donde el usuario ajusta supuestos con deslizadores (crecimiento anual X%, WACC Y%, margen a perpetuidad Z%) y la app devuelve un valor intrínseco por acción. También se puede pre-llenar con supuestos estándares (crecimiento moderado según PIB, tasa descuento = 10% etc.) para usuarios novatos. El resultado, comparado con el precio actual, nos da el **margen de seguridad** (% debajo del valor). Varios repositorios GitHub ya implementan estos cálculos, que podemos integrar. Importante es revelar la sensibilidad: la app podría mostrar cómo varía el valor intrínseco si cambiamos supuestos (por ejemplo, con 3 escenarios: pesimista, base, optimista), enfatizando la idea de margen de seguridad – si incluso en el escenario pesimista el valor intrínseco es mayor que el precio, entonces hay un amplio margen.

* **Valoración por múltiplos comparables**: Otra técnica más simple es comparar la empresa con similares. Por ejemplo, si la empresa cotiza a P/E 8 y el promedio del sector es 15, uno podría argumentar que *debería* valer más si no hay un motivo claro para el descuento. La aplicación puede mostrar un panel de **múltiplos comparativos**: P/E, P/B, EV/EBITDA, etc., de la empresa vs promedio de la industria o competidores clave. Esto ayuda a detectar infravaloraciones relativas. Incluso se puede hacer un cálculo de valor intrínseco implícito: “si esta empresa cotizara al múltiplo promedio de su sector, su precio sería X”. Aunque estos métodos no sustituyen un DCF riguroso, en la práctica muchos inversores los usan para tener una idea rápida de potencial de re-rating.

* **Valor de liquidación o valor de activos**: En casos de inversiones tipo *cigar butt* (colilla de cigarro) a lo Graham, se busca el valor intrínseco en el valor de sus activos netos. Nuestra app podría calcular el **NCAV (Net Current Asset Value)** = activos corrientes - pasivos totales, y ver si la empresa cotiza por debajo de eso (lo que Graham llamaba *net-nets*). Pocas existen hoy, pero sería interesante detectarlas. También calcular valor en libros por acción y comparar con precio (P/B) nos dice qué tanto paga el mercado sobre los activos netos. Para empresas en dificultades, un análisis de valor de liquidación (ej: cuánto recuperaría un acreedor vendiendo todos los activos) es complejo pero se puede simplificar asumiendo porcentajes de recuperación sobre activos (por ej, 100% caja, 70% inventarios, 50% PP\&E). Un módulo avanzado de la app podría intentar eso para situaciones especiales.

Con todo lo anterior, el **margen de seguridad** se convierte en un resultado cuantitativo en la app: por ejemplo, “Precio actual \$50 vs Valor Intrínseco estimado \$80 -> margen de seguridad \~37%”. Un principio común es exigir al menos 20-30% de margen para considerar invertir. Esto se puede incorporar como criterio en la herramienta de screening interno: es decir, filtrar o destacar solo aquellas con X% de margen.

Al proveer estas funciones de valoración intrínseca, es crucial comunicar que son estimaciones, no garantías. La transparencia (mostrar las fórmulas, supuestos, e incluso permitir al usuario modificarlos) ayudará a educar al inversor mientras usa la aplicación, en línea con el espíritu de comprender lo que uno está comprando.

### Ventajas competitivas (fosos económicos)

Identificar **ventajas competitivas sostenibles** – los llamados *economic moats* – es quizás la parte más cualitativa del value investing, popularizada por Warren Buffett y seguida por Morningstar en sus ratings de "moat". Un foso económico es aquello que permite a una empresa mantener a raya a la competencia y obtener altos retornos durante mucho tiempo. Esto puede provenir de varios factores: **activos intangibles** (marca fuerte, patentes), **efecto red** (mientras más usuarios, más valor, e.g. plataformas), **altos costos de cambio** (switching costs que atrapan a clientes), **ventajas de costo** (ser el productor más eficiente) o **escala eficiente** en un nicho.

¿Cómo puede una aplicación detectar o incorporar la noción de "moat"? Si bien es difícil de automatizar plenamente, hay aproximaciones:

* Utilizar **métricas de rentabilidad sostenida**: Por ejemplo, si una empresa ha tenido ROE > 15% todos los últimos 10 años, y ROA superior al de sus competidores, sugiere algún tipo de ventaja (sea marca, eficiencia, etc.). La aplicación podría marcar esto como indicador de un posible moat. Morningstar otorga calificaciones Wide, Narrow o None moat basadas en análisis cualitativo, pero nosotros podemos inferir señales cuantitativas. Otra métrica es la **estabilidad de márgenes**: fosos fuertes suelen verse en márgenes brutos altos y estables, porque la competencia no logra erosionar la rentabilidad.

* **Comparación sectorial**: La app puede mostrar cómo se posiciona la empresa en ciertos indicadores clave respecto a sus pares. Si consistentemente está en el top 10% en margen operativo o participación de mercado, es indicio de alguna ventaja.

* **Patentes, I+D, marca**: Aunque más complejo, podríamos aprovechar datos externos como número de patentes (existen datasets), gasto en I+D como % de ventas (disponible en los estados financieros) o incluso ratings de marca (Interbrand rankings, etc.). Si una empresa gasta mucho en I+D o publicidad y mantiene liderazgo, su intangible es valioso. La aplicación podría resaltar “moat intangible” para empresas de tecnología con fuerte I+D, “moat de costos” para empresas con márgenes superiores por economía de escala, etc., usando heurísticas.

* **Texto y noticias**: Un enfoque experimental es analizar texto de noticias o reportes en busca de palabras clave asociadas a ventajas competitivas (por ejemplo “liderazgo de mercado”, “patente”, “red de usuarios”). Modelos NLP podrían en teoría calificar el moat leyendo informes anuales (donde a veces la propia empresa describe sus ventajas). De hecho, startups fintech exploran resumir los *10-K* para extraer estos puntos clave.

En cualquier caso, la aplicación puede educar al usuario listando cuál de los posibles fosos parece aplicar a la empresa. Por ejemplo: “Ventaja competitiva probable: **Costos bajos** (La empresa tiene el margen bruto más alto de su industria, indicando costos unitarios inferiores a la competencia)”. O “**Efecto red**: La empresa aumentó sus usuarios de 10 a 100 millones en 3 años reforzando su valor de plataforma”. Estos datos narrativos se pueden obtener de combinaciones de métricas (crecimiento de usuarios, ARPU, etc., si se dispone) y cierta lógica.

Hay que recalcar que, aunque la detección computarizada de moats es aproximada, al menos dirigir la atención a ello es valioso. Un inversor en valor debe pensar “¿qué protege a esta empresa de la competencia?”. Nuestra app puede no dar la respuesta absoluta, pero sí proporcionar pistas basadas en datos objetivos, y quizás incluir enlaces a fuentes (por ej., un botón que lleve al usuario al último reporte anual o a un análisis cualitativo externo, para profundizar manualmente).

### Indicadores fundamentales más utilizados

Por último, recopilamos los **indicadores y métricas fundamentales clave** que sustentan todo el análisis anterior. La aplicación debería calcular y mostrar muchos de estos, por lo que enumeramos los principales, su significado, y su relevancia para value investing:

* **Precio/Utilidades (P/E)**: Cuántas veces el precio de la acción contiene las utilidades anuales por acción. Un P/E bajo (relativo al mercado o histórico de la empresa) suele ser señal de infravaloración, salvo que esas utilidades caigan en el futuro. Es uno de los filtros más comunes para *value* (ej: buscar P/E < 15). Conviene distinguir P/E **trailing** (utilidad últimos 12 meses) y **forward P/E** (basado en pronósticos futuros). La app puede mostrar ambos si hay datos de estimados.

* **Precio/Valor contable (P/B)**: Relación entre la capitalización bursátil y el patrimonio neto en libros. Un P/B < 1 significa que el mercado valora la empresa por debajo de sus activos netos tangibles, lo cual puede indicar una gran oportunidad o problemas graves. Inversores deep value aman P/B bajos, pero hay que cuidar la composición de esos activos (no es lo mismo activos líquidos que intangibles cuestionables). La aplicación puede resaltar cuándo P/B es muy bajo e incluso calcular el “*descuento sobre valor en libros*” en porcentaje.

* **Rendimiento de Flujo de Caja Libre (FCF yield)**: FCF anual / precio de la acción (o capitalización). Es análogo inverso al P/FCF. Un FCF yield alto (por ejemplo 10% o más) indica que la empresa está generando efectivo sólido en relación a su precio – esto es a menudo un gran indicador de valor. A diferencia del dividendo, el FCF yield muestra el potencial interno de remuneración (ya sea reinvertida, recompra o dividendo futuro). Empresas de crecimiento podrían no tenerlo, pero en value investing suele buscarse al menos positivo.

* **Return on Equity (ROE) y Return on Invested Capital (ROIC)**: Medidas de rentabilidad sobre el capital propio y total invertido, respectivamente. Son indicadores de **calidad**: un inversor en valor prefiere empresas rentables (porque así, aunque estén baratas por P/E, se asegura que el negocio genera valor). Un ROE consistentemente alto sugiere un moat (como discutimos). La app debería mostrar ROE de cada año y el promedio 5-10 años. ROIC es aún mejor ya que neutraliza la estructura de deuda; se puede comparar ROIC vs coste de capital para ver si crea valor.

* **Deuda/EBITDA y Cobertura de Intereses**: Son indicadores de **riesgo financiero**. Una empresa puede estar barata en P/E pero si tiene Deuda/EBITDA altísima, podría ser una trampa. Deuda/EBITDA > 3 o 4 es peligro en algunos sectores. Cobertura de intereses (EBIT/Intereses) indica cuántas veces las utilidades operativas cubren el pago de intereses; un valor bajo (<2) es señal de posible stress financiero. La aplicación debe incluir estos para alertar al usuario de riesgos.

* **Crecimiento de ingresos y beneficios**: Aunque los value investors no pagan de más por crecimiento, sí valoran empresas que crecen sólidamente. Se suele mirar el crecimiento promedio de ingresos, EBITDA y EPS en 3-5 años. La app puede presentar estas tasas (% CAGR). Un valor típico es buscar compañías con crecimiento positivo pero que el mercado las valora como si no crecieran (p.ej. P/E bajo a pesar de crecimiento decente).

* **Dividend Yield**: Muchas acciones de valor pagan dividendos altos, ya que suelen ser empresas maduras y baratas. Un dividend yield alto puede proveer retorno mientras se espera la apreciación. Sin embargo, yields excesivamente altos (>8-10%) a veces indican que el dividendo podría recortarse. Por eso conviene mostrar el payout ratio (porcentaje de utilidades destinado a dividendos). La app puede advertir sobre sostenibilidad de dividendos (por ej., si payout > 100%, ese yield no es sostenible).

* **EV/EBITDA, EV/EBIT**: El *Enterprise Value* (EV) incluye capitalización + deuda - caja, y compararlo con EBITDA o EBIT es útil para neutralizar diferencias de deuda y impuestos. Muchos analistas prefieren EV/EBITDA al P/E. Un EV/EBITDA bajo (<8) es atractivo generalmente. La aplicación puede calcular EV automáticamente (usando precio \* acciones + deuda - cash desde el balance) y dar estos múltiplos.

* **Indicadores de eficiencia**: Ej. **margen bruto**, **margen operativo**, **rotación de activos**. Son menos usados directamente para decidir si algo está barato, pero ayudan a entender el negocio. En value investing, si encuentras una empresa con P/B bajo pero también márgenes bajísimos, quizás es barata por un motivo (negocio difícil). En cambio, si tiene P/B bajo pero márgenes decentes comparados al sector, es más probable que esté infravalorada injustamente. La app podría mostrar estos en gráficos comparativos sectoriales.

En la implementación computacional, la mayoría de estos indicadores son fórmulas simples usando los datos que tendremos. Un desafío es asegurarnos de tomar los datos correctos (e.g., utilidades ajustadas si corresponden, evitar items extraordinarios si se desea). Un recurso como FinanceToolkit nos asegura definiciones consistentes para cada ratio. Además, la **visualización conjunta** de varios ratios es útil: por ejemplo, un gráfico de radar o barras que muestre en qué percentil se encuentra la empresa en P/E, P/B, ROE, deuda/EBITDA, etc., frente al universo. Esto rápidamente comunica su perfil fundamental.

Finalmente, no olvidemos que la **combinación de indicadores** es lo que da una visión completa. Un solo número no define una inversión. Por eso, la aplicación debe ayudar a *triangular* la valoración: ver la empresa desde distintos ángulos para decidir. Por ejemplo, podría implementar un puntaje *Z* (como el de Altman para quiebras) o *F-score* de Piotroski (que combina 9 criterios fundamentalistas de salud/value) para resumir distintos aspectos en uno. De hecho, el Piotroski F-score fue diseñado específicamente para mejorar las estrategias de value clásicas, filtrando las empresas de bajo P/B que tenían mejores fundamentos; integrar su cálculo puede añadir valor al proceso de selección (no todas las baratas son buenas, y F-score ayuda a diferenciar).

---

**Conclusión:** En suma, el panorama actual del value investing asistido por computadores es rico y en constante evolución. Contamos con plataformas potentes para diseñar estrategias y hacer backtesting con datos históricos fundamentales; APIs y librerías que nos proveen un caudal de información financiera limpia; una base de conocimiento académico que confirma la validez de muchos principios del value investing a la vez que señala mejoras posibles con nuevas técnicas; y comunidades de código abierto que ya materializan partes de este puzzle (desde screeners automáticos hasta modelos de IA “value”). Una aplicación pública construida con estos mimbres podrá ofrecer a los inversores una herramienta integral: capaz de filtrar oportunidades entre miles de acciones, analizar la empresa seleccionada con la profundidad de un analista humano (pero en segundos), valorar su negocio con métodos sólidos y señalar si existe ese margen de seguridad tan buscado, todo ello complementado con la flexibilidad y rigor que aportan las modernas prácticas de ciencia de datos. Así, se democratiza el acceso a la inversión en valor, combinando la sabiduría tradicional de Benjamin Graham con el poder computacional del siglo XXI para tomar decisiones más informadas y potencialmente rentables.

**Fuentes:** Las referencias incluidas a lo largo del texto documentan los puntos clave, desde la definición de inversión en valor, los datos ofrecidos por herramientas como QuantConnect o Yahoo Finance, hasta hallazgos de investigaciones recientes en la materia, entre otros. Cada una respalda y amplía la información presentada, y sirve como lecturas recomendadas para profundizar en cada subtema.
